<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>FriendFinder</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="public/css/style.css">
</head>
<body>
	<header>
	  <div class="navbar-fixed">
	    <nav>
	      <div class="nav-wrapper container">
	        <a href="/" class="brand-logo center">FriendFinder!</a>
	      </div>
	    </nav>
	  </div>
	</header>
	<main>
		<div class="container">
			<h2 class="center survey">Survey Questions</h2>
			<hr>
			<h4>About You</h4>
		  <div class="row">
    		<form class="col s12">
    			<div class="row">
        		<div class="input-field col s12">
          		<input id="name" type="text" class="validate formInput" required>
          		<label for="password">Name</label>
        		</div>
      		</div>
      		<div class="row last">
        		<div class="input-field col s12">
          		<input id="pic" type="text" class="validate formInput" required>
          		<label for="email">Photo</label>
        		</div>
      		</div>
      		<div class="row">
      			<h4>Question 1</h4>
      			<h5>You prefer dogs to cats.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q1">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
      		</div>
      		<div class="row">
      			<h4>Question 2</h4>
      			<h5>You like to stay inside as opposed to going out in your free time.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q2">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 3</h4>
      			<h5>Generally speaking, you rely more on your experience than your imagination.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q3">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 4</h4>
      			<h5>You are rarely late.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q4">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 5</h4>
      			<h5>You are a fast learner</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q5">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 6</h4>
      			<h5>You consider yourself an organized person.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q6">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 7</h4>
      			<h5>You enjoy helping people.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q7">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 8</h4>
      			<h5>When you're feeling sad, you just want to be left alone.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q8">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 9</h4>
      			<h5>People rarely make you angry.</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q9">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
				  <div class="row">
      			<h4>Question 10</h4>
      			<h5>You generally stay relaxed under pressure</h5>
      		  <div class="input-field col s12">
					    <select class="chosen" id="q10">
					      <option value="" disabled selected>Choose your option</option>
					      <option value="1">1 (Strongly Disagree)</option>
					      <option value="2">2</option>
					      <option value="3">3</option>
					      <option value="4">4</option>
					      <option value="5">5 (Strongly Agree)</option>
					    </select>
					  </div>
				  </div>
			    <button class="btn-large waves-effect waves-light" type="submit" name="action" id="submit">Submit
    				<i class="material-icons right">send</i>
  				</button>
    		</form>
  		</div>
		</div>
	</main>
	<footer class="page-footer">
    <div class="footer-copyright">
      <div class="container">
      Â© 2016 Bill Kernan
      <a class="right" href="/api/friends">Friends API List</a>
      <div class="right" style="margin:0 4px">
      	|
    	</div>
      <a class="right" href="">GitHub Repo</a>
      </div>
    </div>
	</footer>
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4 id="matchName"></h4>
      <img id="matchImg"></img>
    </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat"><i class="material-icons">done</i></a>
    </div>
  </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
<script>
	$(document).ready(function() {
    $('select').material_select();
	});
</script>
<script> 
  $("#submit").on("click", function(){
    	// Form validation
  	function validateForm() {
		  var isValid = true;
		  $('.formInput').each(function() {
		  	console.log($(this).val());
		    if ( $(this).val() === '' ) 
	        isValid = false;
			  	console.log(isValid);
		  });

		  $('.chosen').each(function() {
		  	console.log($(this).val());
		  	if ( $(this).val() == null )
	  			isValid = false;
			  	console.log(isValid);
		  });
		  return isValid;
		}
		// If all required fields are filled
		if (validateForm() == true) {
			// Create an object for the user's data
    	var userData = {
    		name: $("#name").val(),
    		photo: $("#pic").val(),
    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
    	}
    	// Grab the URL of the website
    	var currentURL = window.location.origin;
    	// AJAX post the data to the friends API. 
    	$.post(currentURL + "/api/friends", userData, function(data){
    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
    		$("#matchName").text(data.name);
    		$('#matchImg').attr("src", data.photo);
	    	// Show the modal with the best match 
	    	$("#modal1").openModal();
    	});
  		$("#name").val("");
  		$("#pic").val("");
		} else {
			alert("Please fill out all fields before submitting!");
		}
    	return false;
  });
</script>
</body>
</html>